{
    "sourceFile": "lib/modules/system_operation_also_main_module/screens/system_overview_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1734141417239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1734142702159,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,8 @@\n   _SystemOverviewScreenState createState() => _SystemOverviewScreenState();\r\n }\r\n \r\n class _SystemOverviewScreenState extends State<SystemOverviewScreen> {\r\n-  final PageController _pageController = PageController();\r\n   double _zoomFactor = 1.0;\r\n \r\n   @override\r\n   void initState() {\r\n@@ -149,9 +148,9 @@\n                 bottom: 10,\r\n                 left: 10,\r\n                 child: RecipeControl(),\r\n               ),\r\n-              if (state.activeRecipe != null)\r\n+              if (state.status == SystemOperationalStatus.running)\r\n                 Positioned(\r\n                   bottom: 10,\r\n                   right: 10,\r\n                   child: Opacity(\r\n@@ -162,9 +161,9 @@\n                         color: Colors.black54,\r\n                         borderRadius: BorderRadius.circular(4),\r\n                       ),\r\n                       child: Text(\r\n-                        'Active: ${state.activeRecipe!.name}',\r\n+                        'System Running',\r\n                         style: TextStyle(color: Colors.white, fontSize: 12),\r\n                       ),\r\n                     ),\r\n                   ),\r\n"
                }
            ],
            "date": 1734141417239,
            "name": "Commit-0",
            "content": "// lib/modules/system_operation_also_main_module/screens/system_overview_screen.dart\r\n\r\nimport 'package:flutter/material.dart';\r\nimport 'package:flutter/services.dart';\r\nimport 'package:flutter_bloc/flutter_bloc.dart';\r\nimport '../../../blocs/system_state/bloc/system_state_bloc.dart';\r\nimport '../../../blocs/system_state/bloc/system_state_state.dart';\r\nimport '../widgets/system_diagram_view.dart';\r\nimport '../widgets/component_control_overlay.dart';\r\nimport '../widgets/graph_overlay.dart';\r\nimport '../widgets/troubleshooting_overlay.dart';\r\nimport '../widgets/system_status_indicator.dart';\r\nimport '../widgets/recipe_progress_indicator.dart';\r\nimport '../widgets/alarm_indicator.dart';\r\nimport '../widgets/recipe_control.dart';\r\nimport '../widgets/system_readiness_indicator.dart';  // New import\r\n\r\nclass SystemIssuesDisplay extends StatelessWidget {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return BlocBuilder<SystemStateBloc, SystemStateState>(\r\n      builder: (context, state) {\r\n        final issues = state.systemIssues;\r\n\r\n        return Container(\r\n          width: 300,\r\n          padding: EdgeInsets.all(8),\r\n          decoration: BoxDecoration(\r\n            color: Colors.black54,\r\n            borderRadius: BorderRadius.circular(8),\r\n          ),\r\n          child: Column(\r\n            crossAxisAlignment: CrossAxisAlignment.start,\r\n            children: [\r\n              Text(\r\n                'System Issues:',\r\n                style: TextStyle(color: Colors.white, fontWeight: FontWeight.bold),\r\n              ),\r\n              SizedBox(height: 8),\r\n              if (issues.isEmpty)\r\n                Text('No issues detected', style: TextStyle(color: Colors.green))\r\n              else\r\n                ...issues.map((issue) =>\r\n                    Text('â€¢ $issue', style: TextStyle(color: Colors.white))),\r\n            ],\r\n          ),\r\n        );\r\n      },\r\n    );\r\n  }\r\n}\r\n\r\nclass SystemOverviewScreen extends StatefulWidget {\r\n  const SystemOverviewScreen({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  _SystemOverviewScreenState createState() => _SystemOverviewScreenState();\r\n}\r\n\r\nclass _SystemOverviewScreenState extends State<SystemOverviewScreen> {\r\n  final PageController _pageController = PageController();\r\n  double _zoomFactor = 1.0;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n    SystemChrome.setPreferredOrientations([\r\n      DeviceOrientation.landscapeLeft,\r\n      DeviceOrientation.landscapeRight,\r\n    ]);\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    SystemChrome.setPreferredOrientations(DeviceOrientation.values);\r\n    super.dispose();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        leading: IconButton(\r\n          icon: Icon(Icons.arrow_back),\r\n          onPressed: () {\r\n            Navigator.of(context).pop();\r\n          },\r\n        ),\r\n        title: const Text('ALD System Overview'),\r\n        actions: [\r\n          IconButton(\r\n            icon: Icon(Icons.zoom_in),\r\n            onPressed: () {\r\n              setState(() {\r\n                _zoomFactor = _zoomFactor * 1.2;\r\n              });\r\n            },\r\n          ),\r\n          IconButton(\r\n            icon: Icon(Icons.zoom_out),\r\n            onPressed: () {\r\n              setState(() {\r\n                _zoomFactor = _zoomFactor / 1.2;\r\n              });\r\n            },\r\n          ),\r\n          Padding(\r\n            padding: const EdgeInsets.symmetric(horizontal: 16.0),\r\n            child: SystemStatusIndicator(),\r\n          ),\r\n        ],\r\n      ),\r\n      body: BlocBuilder<SystemStateBloc, SystemStateState>(\r\n        builder: (context, state) {\r\n          return Stack(\r\n            children: [\r\n              SystemDiagramView(\r\n                overlays: [\r\n                  ComponentControlOverlay(overlayId: 'full_overview'),\r\n                  GraphOverlay(overlayId: 'full_overview'),\r\n                  TroubleshootingOverlay(overlayId: 'full_overview'),\r\n                ],\r\n                zoomFactor: _zoomFactor,\r\n                enableOverlaySwiping: true,\r\n              ),\r\n              Positioned(\r\n                top: 10,\r\n                left: 10,\r\n                child: Opacity(\r\n                  opacity: 0.7,\r\n                  child: Container(\r\n                    width: 150,\r\n                    child: RecipeProgressIndicator(),\r\n                  ),\r\n                ),\r\n              ),\r\n              Positioned(\r\n                top: 10,\r\n                right: 10,\r\n                child: Opacity(\r\n                  opacity: 0.7,\r\n                  child: Container(\r\n                    width: 150,\r\n                    child: AlarmIndicator(),\r\n                  ),\r\n                ),\r\n              ),\r\n              Positioned(\r\n                bottom: 10,\r\n                left: 10,\r\n                child: RecipeControl(),\r\n              ),\r\n              if (state.activeRecipe != null)\r\n                Positioned(\r\n                  bottom: 10,\r\n                  right: 10,\r\n                  child: Opacity(\r\n                    opacity: 0.7,\r\n                    child: Container(\r\n                      padding: EdgeInsets.all(4),\r\n                      decoration: BoxDecoration(\r\n                        color: Colors.black54,\r\n                        borderRadius: BorderRadius.circular(4),\r\n                      ),\r\n                      child: Text(\r\n                        'Active: ${state.activeRecipe!.name}',\r\n                        style: TextStyle(color: Colors.white, fontSize: 12),\r\n                      ),\r\n                    ),\r\n                  ),\r\n                ),\r\n              SystemReadinessIndicator(),\r\n            ],\r\n          );\r\n        },\r\n      ),\r\n    );\r\n  }\r\n}"
        }
    ]
}